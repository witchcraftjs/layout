import{_ as ye}from"./C8y7k1hF.js";import{d as we,M as G,P as ke,N as xe,r as I,a0 as Se,i as D,o as $e,F as U,t as J,v as W,x as w,X as N,Y as L,z as M,Z as Ce,W as Z,S as Q,V as Ne,a1 as Me,a2 as Ke,a3 as Ae,A as V,J as Pe,K as E,B as ee,_ as Re}from"./Cr7bJNLf.js";import Ie from"./DWuLgtwn.js";var Le={grad:.9,turn:360,rad:360/(2*Math.PI)},$=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},g=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},k=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},de=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},te=function(t){return{r:k(t.r,0,255),g:k(t.g,0,255),b:k(t.b,0,255),a:k(t.a)}},B=function(t){return{r:g(t.r),g:g(t.g),b:g(t.b),a:g(t.a,3)}},Ve=/^#([0-9a-f]{3,8})$/i,z=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},ce=function(t){var e=t.r,r=t.g,a=t.b,s=t.a,i=Math.max(e,r,a),c=i-Math.min(e,r,a),h=c?i===e?(r-a)/c:i===r?2+(a-e)/c:4+(e-r)/c:0;return{h:60*(h<0?h+6:h),s:i?c/i*100:0,v:i/255*100,a:s}},pe=function(t){var e=t.h,r=t.s,a=t.v,s=t.a;e=e/360*6,r/=100,a/=100;var i=Math.floor(e),c=a*(1-r),h=a*(1-(e-i)*r),C=a*(1-(1-e+i)*r),K=i%6;return{r:255*[a,h,c,c,C,a][K],g:255*[C,a,a,h,c,c][K],b:255*[c,c,C,a,a,h][K],a:s}},re=function(t){return{h:de(t.h),s:k(t.s,0,100),l:k(t.l,0,100),a:k(t.a)}},ne=function(t){return{h:g(t.h),s:g(t.s),l:g(t.l),a:g(t.a,3)}},ae=function(t){return pe((r=(e=t).s,{h:e.h,s:(r*=((a=e.l)<50?a:100-a)/100)>0?2*r/(a+r)*100:0,v:a+r,a:e.a}));var e,r,a},R=function(t){return{h:(e=ce(t)).h,s:(s=(200-(r=e.s))*(a=e.v)/100)>0&&s<200?r*a/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,a,s},ze=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,He=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,De=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oe={string:[[function(t){var e=Ve.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?g(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?g(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=_e.exec(t)||De.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:te({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=ze.exec(t)||He.exec(t);if(!e)return null;var r,a,s=re({h:(r=e[1],a=e[2],a===void 0&&(a="deg"),Number(r)*(Le[a]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return ae(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,a=t.b,s=t.a,i=s===void 0?1:s;return $(e)&&$(r)&&$(a)?te({r:Number(e),g:Number(r),b:Number(a),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,r=t.s,a=t.l,s=t.a,i=s===void 0?1:s;if(!$(e)||!$(r)||!$(a))return null;var c=re({h:Number(e),s:Number(r),l:Number(a),a:Number(i)});return ae(c)},"hsl"],[function(t){var e=t.h,r=t.s,a=t.v,s=t.a,i=s===void 0?1:s;if(!$(e)||!$(r)||!$(a))return null;var c=function(h){return{h:de(h.h),s:k(h.s,0,100),v:k(h.v,0,100),a:k(h.a)}}({h:Number(e),s:Number(r),v:Number(a),a:Number(i)});return pe(c)},"hsv"]]},le=function(t,e){for(var r=0;r<e.length;r++){var a=e[r][0](t);if(a)return[a,e[r][1]]}return[null,void 0]},Ee=function(t){return typeof t=="string"?le(t.trim(),oe.string):typeof t=="object"&&t!==null?le(t,oe.object):[null,void 0]},j=function(t,e){var r=R(t);return{h:r.h,s:k(r.s+100*e,0,100),l:r.l,a:r.a}},q=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},se=function(t,e){var r=R(t);return{h:r.h,s:r.s,l:k(r.l+100*e,0,100),a:r.a}},ie=function(){function t(e){this.parsed=Ee(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return g(q(this.rgba),2)},t.prototype.isDark=function(){return q(this.rgba)<.5},t.prototype.isLight=function(){return q(this.rgba)>=.5},t.prototype.toHex=function(){return e=B(this.rgba),r=e.r,a=e.g,s=e.b,c=(i=e.a)<1?z(g(255*i)):"","#"+z(r)+z(a)+z(s)+c;var e,r,a,s,i,c},t.prototype.toRgb=function(){return B(this.rgba)},t.prototype.toRgbString=function(){return e=B(this.rgba),r=e.r,a=e.g,s=e.b,(i=e.a)<1?"rgba("+r+", "+a+", "+s+", "+i+")":"rgb("+r+", "+a+", "+s+")";var e,r,a,s,i},t.prototype.toHsl=function(){return ne(R(this.rgba))},t.prototype.toHslString=function(){return e=ne(R(this.rgba)),r=e.h,a=e.s,s=e.l,(i=e.a)<1?"hsla("+r+", "+a+"%, "+s+"%, "+i+")":"hsl("+r+", "+a+"%, "+s+"%)";var e,r,a,s,i},t.prototype.toHsv=function(){return e=ce(this.rgba),{h:g(e.h),s:g(e.s),v:g(e.v),a:g(e.a,3)};var e},t.prototype.invert=function(){return b({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),b(j(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),b(j(this.rgba,-e))},t.prototype.grayscale=function(){return b(j(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),b(se(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),b(se(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?b({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):g(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=R(this.rgba);return typeof e=="number"?b({h:e,s:r.s,l:r.l,a:r.a}):g(r.h)},t.prototype.isEqual=function(e){return this.toHex()===b(e).toHex()},t}(),b=function(t){return t instanceof ie?t:new ie(t)};const Be=["id"],je=["aria-valuenow"],qe=["aria-valuenow"],Fe={class:"color-group flex w-full flex-1 gap-2"},Te={class:"color-wrapper bg-transparency-squares relative aspect-square h-[calc(var(--slider-size)*3)] rounded-full shadow-sm"},Oe={class:"color-controls flex flex-1 items-center gap-2"},Xe={class:"save-cancel-group flex w-full items-center justify-center gap-2"},ue=`
	slider
	no-touch-action
	h-4
	w-full
	relative
	flex
`,F=`
	h-[var(--slider-size)]
	w-[var(--slider-size)]
	shadow-sm
	shadow-black/50
	border-2 border-neutral-700
	rounded-full
	absolute
	cursor-pointer
	outline-none
	focus:border-accent-500
	active:border-accent-500
	hover:border-accent-500
`,T="Use the arrow keys to move the handle, or use shift to move in 10 pixel increments.",Ye=we({name:"lib-color-picker",__name:"LibColorPicker",props:G({label:{},id:{},allowAlpha:{type:Boolean,default:!0},border:{type:Boolean,default:!0},copyTransform:{type:Function,default:(t,e)=>e}},{modelValue:{required:!1,default:()=>({r:0,g:0,b:0})},modelModifiers:{}}),emits:G(["save","cancel"],["update:modelValue"]),setup(t,{emit:e}){const r=ke(t,"modelValue"),a=xe(),s=t,i=e,c=I(null),h=I(null),C=I(null),K={hue:{el:h,xKey:"h",xSteps:360},alpha:{el:C,xSteps:1,xKey:"a"},picker:{el:c,xSteps:100,ySteps:100,xKey:"s",yKey:"v"}},u=Se({percent:{h:0,s:0,v:0,a:0},val:{h:0,s:0,v:0,a:0}}),H=D(()=>b(u.val).toRgbString()),ve=D(()=>b({...u.val,a:1}).toRgbString()),fe=()=>{var n;if(navigator.clipboard){const o=(n=s.copyTransform)==null?void 0:n.call(s,u.val,H.value);navigator.clipboard.writeText(o).catch(()=>{})}},ge=(n,o)=>{const d=n.getContext("2d"),{height:l,width:m}=n;d.clearRect(0,0,m,l);const v=d.createLinearGradient(0,0,0,l);v.addColorStop(0,"white"),v.addColorStop(1,"black");const y=d.createLinearGradient(0,0,m,0);y.addColorStop(0,`hsla(${o},100%,50%,0)`),y.addColorStop(1,`hsla(${o},100%,50%,1)`),d.fillStyle=v,d.fillRect(0,0,m,l),d.fillStyle=y,d.globalCompositeOperation="multiply",d.fillRect(0,0,m,l),d.globalCompositeOperation="source-over"},O=(n,o,d=360)=>{const l=n.getContext("2d"),{height:m,width:v}=n;l.clearRect(0,0,v,m);const y=Ke(o)?o.length-1:d,f=l.createLinearGradient(0,0,v,0);for(let p=0;p<y+1;p++){const S=o instanceof Function?o(p):o[p];f.addColorStop(p/y,S)}l.fillStyle=f,l.fillRect(0,0,v,m)},X=(n,o,d=100,l=100,m=!1)=>{const v=n/o,y=v*d,f=Math.round(y*l)/l,p=d===l?f:Math.round(v*100*l)/l,S={val:f,percent:p};return m&&(S.val=d-f),S},_=I("");let A=!1;const Y=(n,o)=>{const d=K[o].el.value,{x:l,y:m,width:v,height:y}=d.getBoundingClientRect(),f=K[o];if(f.xKey!==void 0){let p=n.clientX-l;p=p<0?0:p>v?v:p;const S=X(p,v,f.xSteps??100);u.percent[f.xKey]=S.percent,u.val[f.xKey]=S.val}if(f.yKey!==void 0){let p=n.clientY-m;p=p<0?0:p>y?y:p;const S=X(p,y,f.ySteps??100,100,!0);u.percent[f.yKey]=S.percent,u.val[f.yKey]=S.val}},x={keydown:(n,o)=>{var d;if(Me(n.target),(d=n.target)!=null&&d.getBoundingClientRect&&["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(n.key)){n.preventDefault();const{x:l,y:m,width:v,height:y}=n.target.getBoundingClientRect();let f=n.key==="ArrowRight"?1:n.key==="ArrowLeft"?-1:0,p=n.key==="ArrowUp"?-1:n.key==="ArrowDown"?1:0;n.shiftKey&&(f*=10),n.shiftKey&&(p*=10),Y({clientX:l+v/2+f,clientY:m+y/2+p},o)}},pointerdown:(n,o)=>{A||(n.preventDefault(),_.value=o,A=!0,document.addEventListener("pointermove",x.pointermove),document.addEventListener("pointerup",x.pointerup))},pointerleave:n=>{A&&n.preventDefault()},pointermove:n=>{A&&(n.preventDefault(),requestAnimationFrame(()=>{const o=_.value;Y(n,o)}))},pointerup:n=>{n.preventDefault(),_.value="",A=!1,document.removeEventListener("pointermove",x.pointermove),document.removeEventListener("pointerup",x.pointerup)}},P=(n,{updatePosition:o=!0,updateValue:d=!0}={})=>{if(C.value){const l=b(n),m=l.alpha(0).toHslString(),v=l.alpha(1).toHslString();O(C.value,[m,v])}O(h.value,l=>`hsl(${l},100%,50%)`),ge(c.value,n.h),o&&(u.percent.h=Math.round(n.h/360*1e4)/100,u.percent.s=n.s,u.percent.v=100-n.v,u.percent.a=s.allowAlpha&&n.a!==void 0?n.a*100:1),d&&(u.val={...n,a:s.allowAlpha?n.a:1})},he=n=>{var d;const o=(d=n.target)==null?void 0:d.value;if(o){const l=b(o);if(!l.isValid())return;P(l.toHsv())}};$e(()=>{const n=b(r.value);P(n.toHsv())}),U(s,()=>{const n=b(r.value);P(n.toHsv())}),U(u,()=>{P(u.val,{updatePosition:!1,updateValue:!1})});const be=()=>{const n=b(u.val).toRgb();P(u.val,{updatePosition:!1,updateValue:!1}),r.value=n,i("save",n)},me=D(()=>u.percent.v<50||u.val.a===void 0||u.val.a<.5);return(n,o)=>{const d=ye;return J(),W("div",{id:n.id??Q(a),"aria-label":"color picker",class:N(Q(Ne)(`color-picker
			[--slider-size:var(--spacing-4)]
			[--contrast-dark:var(--color-neutral-100)]
			[--contrast-light:var(--color-neutral-800)]
			[--fg:rgb(var(--contrast-dark))]
			[--bg:rgb(var(--contrast-light))]
			max-w-[300px]
			flex flex-col items-center justify-center
			bg-bg
			dark:bg-fg
			gap-3
			p-3
		`,me.value&&`
			[--fg:rgb(var(--contrast-light))]
			[--bg:rgb(var(--contrast-dark))]
		`,n.border&&`
			border rounded border-neutral-600
		`))},[w("div",{class:N(`picker
			no-touch-action
			w-full
			aspect-square
			relative
			flex
			rounded
			focus:border-accent-500
		`),onPointerdown:o[1]||(o[1]=l=>x.pointerdown(l,"picker")),onPointerleave:o[2]||(o[2]=l=>x.pointerleave(l))},[w("canvas",{ref_key:"pickerEl",ref:c},null,512),w("div",{"aria-live":"assertive","aria-description":T,class:N(`
					handle ${F}
					border-[var(--fg)]
					hover:shadow-black
					active:shadow-black
				`),tabindex:"0",style:L(`
					left: calc(${u.percent.s}% - var(--slider-size)/2);
					top: calc(${u.percent.v}% - var(--slider-size)/2);
					background: ${ve.value};
				`),onKeydown:o[0]||(o[0]=l=>x.keydown(l,"picker"))},[M(Ie,{value:`saturation: ${u.percent.s}, value: ${u.percent.s}`},null,8,["value"])],38)],32),w("div",{class:N(`hue-slider ${ue}`),onPointerdown:o[4]||(o[4]=l=>x.pointerdown(l,"hue"))},[w("canvas",{ref_key:"hueSliderEl",ref:h},null,512),w("div",{role:"slider","aria-valuenow":`${u.percent.h}`,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"hue slider","aria-description":T,tabindex:"0",class:N(`handle ${F} bg-neutral-50`),style:L(`left: calc(${u.percent.h}% - var(--slider-size)/2)`),onKeydown:o[3]||(o[3]=l=>x.keydown(l,"hue"))},null,46,je)],34),n.allowAlpha?(J(),W("div",{key:0,class:N(`alpha-slider ${ue}`),onKeydown:o[5]||(o[5]=l=>x.keydown(l,"alpha")),onPointerdown:o[6]||(o[6]=l=>x.pointerdown(l,"alpha"))},[w("canvas",{class:"bg-transparency-squares",ref_key:"alphaSliderEl",ref:C},null,512),w("div",{role:"slider","aria-label":"alpha slider","aria-valuenow":`${u.percent.h}`,"aria-valuemin":0,"aria-valuemax":100,"aria-description":T,tabindex:"0",class:N(`handle ${F} bg-neutral-50`),style:L(`left: calc(${u.percent.a}% - var(--slider-size)/2)`)},null,14,qe)],34)):Ce("",!0),w("div",Fe,[w("div",Te,[w("div",{class:"color size-full rounded-full border-2 border-neutral-600 dark:border-neutral-300",style:L(`background:${H.value}`)},null,4)]),w("div",Oe,[Z(n.$slots,"input",{},()=>[M(Ae,{class:"w-full","aria-label":n.label,"model-value":H.value,onInput:he},null,8,["aria-label","model-value"]),M(E,{"aria-label":"'copy'",onClick:o[7]||(o[7]=l=>fe())},{default:V(()=>[M(Pe,null,{default:V(()=>[M(d)]),_:1})]),_:1})],!0)])]),Z(n.$slots,"buttons",{},()=>[w("div",Xe,[M(E,{onClick:o[8]||(o[8]=l=>be())},{default:V(()=>o[10]||(o[10]=[ee("Save")])),_:1}),M(E,{onClick:o[9]||(o[9]=l=>i("cancel"))},{default:V(()=>o[11]||(o[11]=[ee("Cancel")])),_:1})])],!0)],10,Be)}}}),Ge=Re(Ye,[["__scopeId","data-v-8ac20dca"]]),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"}));export{Ge as L,Ze as a,b as w};
