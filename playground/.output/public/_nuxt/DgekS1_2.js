import{a6 as L,t as o,v as r,x as n,d as J,r as N,a7 as R,F as S,a8 as K,N as X,i as A,S as l,X as F,V as v,W as z,Z as d,y as b,U as T,a9 as Z,aa as G,z as p,A as k,J as B,B as E,K as Q,ab as Y}from"./Cr7bJNLf.js";const ee={style:{"vertical-align":"-0.125em",height:"1em",display:"inline-block",width:"auto"},viewBox:"0 0 384 512"};function te($,f){return o(),r("svg",ee,f[0]||(f[0]=[n("path",{fill:"currentColor",d:"M320 464c8.8 0 16-7.2 16-16V160h-80c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16v384c0 8.8 7.2 16 16 16zM0 64C0 28.7 28.7 0 64 0h165.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64z"},null,-1)]))}const se=L({name:"fa6-regular-file",render:te}),le={style:{"vertical-align":"-0.125em",height:"1em",display:"inline-block",width:"auto"},viewBox:"0 0 448 512"};function ie($,f){return o(),r("svg",le,f[0]||(f[0]=[n("path",{fill:"currentColor",d:"M246.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l73.4-73.4V320c0 17.7 14.3 32 32 32s32-14.3 32-32V109.3l73.4 73.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-128-128zM64 352c0-17.7-14.3-32-32-32S0 334.3 0 352v64c0 53 43 96 96 96h256c53 0 96-43 96-96v-64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32z"},null,-1)]))}const ae=L({name:"fa6-solid-arrow-up-from-bracket",render:ie}),ne=["for"],oe={key:1},re={key:0,class:"flex flex-col items-center text-sm"},ce={class:""},fe=["id","accept","multiple"],pe={class:"flex flex-initial basis-full justify-start"},ue={class:"flex flex-initial basis-full justify-center"},de={key:0,class:"image bg-transparency-squares flex h-[80px] flex-wrap items-center justify-center"},me=["src"],ge={key:1,class:"no-image flex h-[80px] flex-1 basis-full flex-wrap items-center justify-center"},he=["title"],ve={name:"lib-file-input"},we=J({...ve,name:"lib-file-input",inheritAttrs:!1,props:{id:{},multiple:{type:Boolean,default:!1},formats:{default:()=>["image/*",".jpeg",".jpg",".png"]},compact:{type:Boolean,default:!1}},emits:["input","errors"],setup($,{emit:f}){const V=N(null),i=R([]),c=R([]),j=N(!1);S(i,()=>{M("input",i.map(e=>e.file))}),S(c,()=>{c.length>0&&(j.value=!0,setTimeout(()=>{j.value=!1},500),M("errors",c))});const m=K(["wrapper","input","previews"]),M=f,W=X(),_=$,U=A(()=>{var e;return((e=_.formats)==null?void 0:e.filter(s=>!s.startsWith(".")))??[]}),C=A(()=>{var e;return((e=_.formats)==null?void 0:e.filter(s=>s.startsWith(".")))??[]}),H=e=>URL.createObjectURL(e),O=e=>{const s=i.indexOf(e);i.splice(s,1)},P=A(()=>C.value.join(", ")),I=async e=>{var s;if(e.preventDefault(),V.value.files){const u=[];for(const a of V.value.files){const w=a.type.startsWith("image"),x=_.formats.length===0,g=U.value.find(t=>t.endsWith("/*")?a.type.startsWith(t.slice(0,-2)):t===a.type)!==void 0,h=C.value.find(t=>a.name.endsWith(t))!==void 0;if(!x&&(!g||!h)){const t=((s=a.name.match(/.*(\..*)/))==null?void 0:s[1])??"Unknown",D=a.type===""?"":` (${a.type})`,q=`File type ${t}${D} is not allowed. Allowed file types are: ${P.value}.`,y=new Error(q);y.file=a,y.isValidExtension=h,y.isValidMimeType=g,u.push(y);continue}u.length>0||i.find(t=>t.file===a)||(_.multiple||i.length<1?i.push({file:a,isImg:w}):i.splice(0,i.length,{file:a,isImg:w}))}if(u.length>0)return c.splice(0,c.length,...u),!1;c.length>0&&c.splice(0,c.length)}};return(e,s)=>{var x,g,h;const u=ae,a=Y,w=se;return o(),r("div",T({class:l(v)(`file-input
		justify-center
		border-2
		border-dashed
		border-accent-500/80
		focus-outline-within
		transition-[border-color,box-shadow]
		ease-out`,e.compact&&"rounded",!e.compact&&"flex w-full flex-col items-center gap-2 rounded-xl  p-2 ",l(c).length>0&&j.value&&"border-danger-400",l(m).wrapperAttrs.class)},{...l(m).wrapperAttrs,class:void 0}),[n("div",{class:F(l(v)("relative justify-center",e.compact&&"flex gap-2",!e.compact&&`input-wrapper
		flex flex-col items-center
		`))},[n("label",{for:e.id??l(W),class:F(l(v)("pointer-events-none flex gap-1 items-center whitespace-nowrap"))},[e.compact||e.multiple||l(i).length===0?z(e.$slots,"icon",{key:0},()=>[p(B,null,{default:k(()=>[p(u)]),_:1})]):d("",!0),z(e.$slots,"label",{},()=>[E(b((e.compact?"Choose File":"Drag & Drop File")+(e.multiple?"s":"")),1)]),e.compact&&e.multiple?(o(),r("span",oe,b(` (${l(i).length})`),1)):d("",!0)],10,ne),!e.compact&&((x=e.formats)==null?void 0:x.length)>0?(o(),r("label",re,[z(e.$slots,"formats",{},()=>[s[2]||(s[2]=E("Accepted Formats: "))]),n("div",ce,b(C.value.join(", ")),1)])):d("",!0),n("input",T({id:e.id??l(W),class:l(v)(`absolute inset-0
				z-0
				cursor-pointer
				text-[0]
				opacity-0
				`,(g=l(m).inputAttrs)==null?void 0:g.class),type:"file",accept:e.formats.join(", "),multiple:e.multiple,ref_key:"el",ref:V},{...l(m).inputAttrs,class:void 0},{onInput:s[0]||(s[0]=(...t)=>I&&I(...t)),onClick:s[1]||(s[1]=t=>t.target.value=null)}),null,16,fe)],2),!e.compact&&l(i).length>0?(o(),r("div",{key:0,class:F(l(v)(`previews
			flex items-stretch justify-center gap-2 flex-wrap
			`,e.multiple&&`
				w-full
			`,(h=l(m).previewsAttrs)==null?void 0:h.class))},[s[3]||(s[3]=n("div",{class:"flex-1"},null,-1)),(o(!0),r(Z,null,G(l(i),t=>(o(),r("div",{class:"preview z-1 relative flex min-w-0 max-w-[150px] flex-initial flex-wrap items-center gap-2 rounded border border-neutral-400 shadow-sm shadow-neutral-800/20",key:t.file.name},[n("div",pe,[p(Q,{border:!1,"aria-label":`Remove file ${t.file.name}`,onClick:D=>O(t)},{default:k(()=>[p(B,null,{default:k(()=>[p(a)]),_:1})]),_:2},1032,["aria-label","onClick"])]),n("div",ue,[t.isImg?(o(),r("div",de,[n("img",{class:"max-h-full w-auto",src:H(t.file)},null,8,me)])):d("",!0),t.isImg?d("",!0):(o(),r("div",ge,[p(B,null,{default:k(()=>[p(w,{class:"text-4xl opacity-50"})]),_:1})]))]),n("div",{class:"filename min-w-0 flex-1 basis-0 truncate break-all rounded p-1 text-sm",title:t.file.name},b(t.file.name),9,he)]))),128)),s[4]||(s[4]=n("div",{class:"flex-1"},null,-1))],2)):d("",!0)],16)}}});export{we as default};
