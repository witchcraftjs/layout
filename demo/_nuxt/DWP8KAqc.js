import{r as f,Y as M,o as L,e as T,Z as S,j as h,a3 as N,au as v,F as q,av as O,aw as C,a9 as g,v as _,x as w,y as A,L as b,N as x,Q as K,P as j,O as m,X as $}from"./DVXjeaI0.js";import{u as R}from"./Cn0dpc25.js";import{u as P,_ as V}from"./WjZe0SYZ.js";import{i as W,m as H,d as F,a as G,b as E,c as Q,l as U,t as X}from"./Bk2TiR2_.js";import{N as Y}from"./WyQ6tATE.js";import{t as B}from"./DeCVlzJk.js";import Z from"./ilxXCIM8.js";import"./CnKPZp4P.js";import"./BvGW0yjE.js";import"./BpX0FRyY.js";import"./CD0Jx8XC.js";import"./CoDCRfl4.js";import"./BOOMfXGw.js";import"./yRW9QxNd.js";import"./Cj4oJnjv.js";import"./CJMfQ0aH.js";function z(e,a=f(!0)){const i=f(!1),t=f(!1),s=l=>{t.value=!0,setTimeout(()=>{t.value=!1},0)},n=l=>{t.value=!1,i.value=!1},r=l=>{t.value&&a.value&&(i.value=!0)};let c=!1;const u=()=>{c&&(S(e.value),e.value&&(e.value.addEventListener("focusin",r),e.value.addEventListener("keydown",s),e.value.addEventListener("mousedown",n)))},d=()=>{e.value&&(S(e.value),e.value.removeEventListener("focusin",r),e.value.removeEventListener("keydown",s),e.value.removeEventListener("mousedown",n))};return M(a,(l,p)=>{l!==p&&(l?u():(i.value=!1,d()))}),L(()=>{c=!0,a.value&&u()}),T(()=>{c=!1,d()}),{outline:i,control:a}}const D="prefersColorSchemeDark",J=["system","dark","light"],ee=({useLocalStorage:e=!0,darkModeOrder:a=J,isClientSide:i=!0,useViewTransition:t=!0}={})=>{const s=f(!1),n=f(void 0);e&&i&&M(n,()=>{localStorage.setItem(D,n.value?"true":"false")});const r=h(()=>n.value??s.value),c=h(()=>n.value===void 0?"system":n.value?"dark":"light");function u(o){n.value=o==="dark"?!0:o==="light"?!1:void 0}function d(){const o=a.indexOf(c.value);return o===2?a[0]:a[o+1]}function l(){u(d())}function p(){if(!t){l();return}const o=d(),y=a.indexOf(c.value),I=s.value?"dark":"light";if(o==="system"&&I===a[y]){l();return}document.startViewTransition||l(),document.startViewTransition(async()=>{l(),await N()})}return L(()=>{if(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:o})=>{o?s.value=!0:s.value=!1}),e!==!1){const o=typeof e=="string"?e:D,y=localStorage.getItem(o);y==="true"?n.value=!0:y==="false"&&(n.value=!1)}}),v(W,r),v(H,n),v(F,{darkMode:r,darkModeState:c,manualDarkMode:n,systemDarkMode:s}),v(G,{setDarkMode:u,cycleDarkMode:p}),{darkMode:r,darkModeState:c,setDarkMode:u,cycleDarkMode:p,manualDarkMode:n,systemDarkMode:s}};function te(...e){return ee(...e)}function ae(e,a){const i=q(E);if(i===void 0)throw new Error("witchcraft/ui: The default translation function requires the useSetupI18n `useBuiltinTranslations` options to be true. Did you set it?");let t=i.value["witchcraft-ui"][e];if(t===void 0)throw new Error(`No translation for key ${e}.`);if(a!==void 0)for(const[s,n]of Object.entries(a))t=t.replaceAll(`{${s}}`,n);return t}const se=Object.assign({"../assets/locales/en.json":()=>O(()=>import("./smYWnEM1.js"),[],import.meta.url)}),k={},oe=new Proxy({},{get(){return"..."}}),ne=new Proxy({},{get(e,a){if(a==="witchcraft-ui")return oe}});async function ie({locale:e,useBuiltinTranslations:a=!1,useDummyMessageSetWhileLoading:i=!0,translationFunction:t=ae}){if(v(Q,t),a){const s=f(i?ne:{});v(E,s);async function n(r){if(k[r])s.value=k[r];else{const u=(await se[`../assets/locales/${r}.json`]()).default;k[r]=u,s.value=u}}n(e.value),M(e,async()=>{n(e.value)})}}function re(){const e=f("en"),a=f("en-GB");function i(s){e.value=s}function t(s){a.value=s}return v(U,e),v(X,a),{languageLocale:e,timeLocale:a,setLanguageLocale:i,setTimeLocale:t}}const ue=C,le=["id"],je=Object.assign({name:"Root",inheritAttrs:!1,suspensible:!1},{__name:"WRoot",props:{theme:{type:Object,required:!1,default:void 0},outline:{type:Boolean,required:!1,default:!0},forceOutline:{type:Boolean,required:!1,default:!1},testWrapperMode:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1,default:"app"},getRef:{type:Function,required:!1,default:void 0},isClientSide:{type:Boolean,required:!1,default:!0},useBuiltinTranslations:{type:Boolean,required:!1,default:!0},useNotifications:{type:Boolean,required:!1,default:!0},notificationHandler:{type:Object,required:!1,default:void 0}},setup(e,{expose:a}){const i=R(["wrapper"]),t=e,s=f(null);function n(o){o!==null&&!(o instanceof HTMLElement)&&$(),s.value=o,t.getRef?.(o)}if(t.useNotifications){const o=t.notificationHandler??new Y;P(o,t.isClientSide)}const r=z(s).outline,c=h(()=>t.outline&&r.value||t.forceOutline),u=h(()=>t.theme??ue),d=()=>{g(u.value).attach(s.value)};t.isClientSide&&(L(()=>{g(u.value).on("change",d),d()}),T(()=>{g(u.value).off("change",d)}));const l=te({isClientSide:t.isClientSide}),p=l.darkMode;if(a({darkMode:l}),t.useBuiltinTranslations){const{languageLocale:o}=re();ie({locale:o,useBuiltinTranslations:!0,useDummyMessageSetWhileLoading:!0})}return(o,y)=>(w(),_("div",j({id:e.id,tabindex:"-1",class:m(B)(c.value?"group outlined outlined-visible":"[&_*]:outline-hidden",m(p)&&" dark",m(i).wrapperAttrs?.class)},{...m(i).wrapperAttrs,attrs:void 0,class:void 0},{ref:n}),[A("div",j({id:"root"},{...m(i).attrs,class:void 0,wrapperAttrs:void 0},{class:m(B)(`
			dark:bg-fg
			dark:text-bg
			bg-bg
			text-fg
		`,e.testWrapperMode&&`
			px-10
			pb-10
		`,!e.testWrapperMode&&`
			min-h-dvh
			flex
			flex-col
		`,m(i).attrs?.class)}),[e.testWrapperMode?(w(),b(Z,{key:0,"show-outline":c.value},null,8,["show-outline"])):x("",!0),e.useNotifications&&e.isClientSide?(w(),b(V,{key:1,"data-allow-mismatch":""})):x("",!0),K(o.$slots,"default")],16)],16,le))}});export{je as default};
