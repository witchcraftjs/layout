import{aO as I,aQ as L,aV as R,aW as P,$ as v,a1 as X,r as F,j as D,O as Q,Q as O,x as b,v as p,P as J,y as $,ag as z,ah as E,X as m,S as Y,T as j,W as M,z as H}from"#entry";function q(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function k(e,...t){for(const n of t){const r=e,a=I(L(r),L(n));for(const s of a){const i=r[s],l=n[s];i===void 0?r[s]=l:q(l)&&q(i)?r[s]=k(i,l):l!==void 0&&(r[s]=l)}}return e}function Z(e,t=0,{queue:n=!1,index:r=n?0:void 0,leading:a=!0,trailing:s=!0}={}){return R(e,t,{queue:n,index:r,leading:a,trailing:s},!0)}const W=P,h=new WeakMap,A={fitWidth:!0,margin:"dynamic",enabled:!0},_=(e,t)=>{V(t),B(t)},x=Z(_),ee={mounted(e,{value:t={}}){const n=k({...A},t);n.enabled&&(K(e,n),W.observe(e,x))},updated(e,{value:t={}}){const n=k({...A},t),r=e&&f(e),a=e&&h.get(e).grips,s=r&&r.colCount!==n.colCount;(a&&!n.enabled||s)&&(N(e),W.unobserve(e,x)),(!a&&n.enabled||s)&&(K(e,n),W.observe(e,x))},unmounted(e){h.has(e)&&h.get(e).grips&&(N(e),P.unobserve(e,x))},getSSRProps(){return{}}};function C(e,t,n){const r=f(n),a=Math.max(r.margin,t),s=y(n).findIndex(i=>e===i);r.fitWidth?r.widths.value[s]=`${a/u(n).width*100}%`:r.widths.value[s]=`${a}px`}function u(e){const t=e.getBoundingClientRect();return{x:Math.round(t.x),width:Math.round(t.width)}}function T(e){const t=f(e);t.target||v();let n=y(e)[t.grips.get(t.target)];for(n||v();n?.classList.contains("no-resize");)n=n?.previousElementSibling??null;let r=n?.nextElementSibling??null;if(t.fitWidth)for(;r?.classList.contains("no-resize");)r=r?.nextElementSibling??null;return{col:n,colNext:r}}function te(e){return t=>{const n=f(e);if(!n.isDragging){X(t.target),n.target=t.target,n.isDragging=!0,t.preventDefault(),document.addEventListener("pointerup",n.pointerUpHandler);const{col:r,colNext:a}=T(e);if(r===null||a===null)e.classList.add("resizable-cols-error");else{document.addEventListener("pointermove",n.pointerMoveHandler);const s=u(r);s&&(n.offset=t.pageX-(s.x+s.width))}}}}function ne(e){return t=>{const n=f(e);if(n.isDragging){t.preventDefault();const{col:r,colNext:a}=T(e);if(r!==null){const s=u(r),i=s.width,l=s.x,o=u(a||e),c=o.x+o.width,d=n.margin,g=t.pageX-n.offset;if(n.fitWidth){if(g>l+d&&g<c-d){const w=g-l,S=i-w;if(o.width+S<d){e.classList.add("resizable-cols-error");return}C(r,w,e),C(a,o.width+S,e)}}else if(g>l+d){const w=g-l;C(r,w,e)}B(e)}}}}function G(e){return t=>{const n=f(e);n.isDragging&&(t.preventDefault(),n.isDragging=!1,e.classList.remove("resizable-cols-error"),n.offset=0,delete n.target,document.removeEventListener("pointermove",n.pointerMoveHandler),document.removeEventListener("pointerup",n.pointerUpHandler),document.removeEventListener("pointerleave",n.pointerLeaveHandler))}}function U(){const e=document.createElement("div");return e.style.position="absolute",e.style.cursor="col-resize",e.style.top="0",e.style.bottom="0",e.classList.add("grip"),e}const re=e=>{const t=Array.from(e.querySelectorAll(".grip")??[]);for(const n of t)e.removeChild(n)};function oe(e){const t=U();e.appendChild(t);const n=u(t).width*3;return e.removeChild(t),n}function f(e){const t=h.get(e);return t||v("El went missing."),t}function y(e){const t=h.get(e);return t||v("El went missing."),[...e.querySelectorAll(`:scope ${t.selector?t.selector:"tr > td"}`)]}function K(e,t){const n=oe(e),r={grips:new Map,isDragging:!1,pointerDownHandler:te(e),pointerMoveHandler:ne(e),pointerUpHandler:G(e),pointerLeaveHandler:G(e),fitWidth:t.fitWidth,margin:t.margin==="dynamic"?n:t.margin,colCount:t.colCount,widths:t.widths,selector:t.selector};h.set(e,r);const s=y(e).slice(0,t.colCount);V(e,s),e.style.width=r.fitWidth?"":"min-content";const i=t.colCount;for(let l=0;l<i;l++){if(t.fitWidth&&l===i-1)continue;const o=U();o.addEventListener("pointerdown",r.pointerDownHandler),e.appendChild(o),r.grips.set(o,l)}B(e),e.classList.add("resizable-cols-setup")}function B(e){let t=0;const n=f(e);for(const r of n.grips.keys()){const a=n.grips.get(r),s=y(e)[a];s||v();const i=u(s),l=u(r);r.style.left=`${t+i.width-l.width/2}px`,t+=i.width}}function V(e,t){const n=f(e),r=t??y(e).slice(0,n.colCount),a=n.colCount;let s=0;const i=a*n.margin;for(let l=0;l<a;l++){const o=r[l],c=u(o);C(o,c.width,e),s+=u(o).width}s<i?e.style.minWidth=`${i}px`:e.style.minWidth=""}function N(e){const t=f(e);e.removeEventListener("pointerdown",t.pointerDownHandler),document.removeEventListener("pointermove",t.pointerMoveHandler),document.removeEventListener("pointerup",t.pointerUpHandler);for(const n of Object.keys(t))delete t[n];h.delete(e),e.classList.remove("resizable-cols-setup"),re(e)}const se={key:0,class:"table--header"},ie={class:"table--row"},le={class:"table--body"},ce=Object.assign({name:"LibTable"},{__name:"WTable",props:{resizable:{type:Object,required:!1,default:()=>({})},values:{type:Array,required:!1,default:()=>[]},itemKey:{type:[String,Number,Symbol,Function],required:!1,default:""},cols:{type:Array,required:!1,default:()=>[]},rounded:{type:Boolean,required:!1,default:!0},border:{type:Boolean,required:!1,default:!0},cellBorder:{type:Boolean,required:!1,default:!0},header:{type:Boolean,required:!1,default:!0},colConfig:{type:Object,required:!1,default:()=>({})}},setup(e){const t=e,n=F([]),r=D(()=>({colCount:t.cols.length,widths:n,selector:".cell",...t.resizable})),a=(i,l,o)=>{const c={bl:!o&&i===t.values.length-1&&l===0,br:!o&&i===t.values.length-1&&l===t.cols.length-1,tr:(o||!t.header)&&i===0&&l===t.cols.length-1,tl:(o||!t.header)&&i===0&&l===0,"first-row":(o||!t.header)&&i===0,"last-row":i===t.values.length-1,"first-col":l===0,"last-col":l===t.cols.length-1};return L(c).filter(d=>c[d])},s=D(()=>Object.fromEntries([...Array(t.values.length+1).keys()].map(i=>[...Array(t.cols.length).keys()].map(l=>[`${i-1}-${l}`,a(i<=0?0:i-1,l,i===0).join(" ")])).flat()));return(i,l)=>Q((b(),p("table",{class:m(O(Y)(`table
		table-fixed
		border-separate
		border-spacing-0
		overflow-x-scroll
		scrollbar-hidden
		[&_.grip]:w-[5px]
		relative
		w-full
		box-content
		[&_thead]:font-bold
		[&_td]:p-1
		[&_td]:overflow-x-hidden
		[&.resizable-cols-error]:cursor-not-allowed
		[&.resizable-cols-error]:user-select-none
		`,e.cellBorder&&`
			[&_td]:border-neutral-500
			[&_td:not(.last-row)]:border-b
			[&_td:not(.first-col)]:border-l
		`,e.border&&`
			[&_thead_td]:bg-neutral-200
			[&_td]:border-neutral-500
			dark:[&_thead_td]:bg-neutral-800
			dark:[&_td]:border-neutral-500
			[&_td.first-row]:border-t
			[&_td.last-row]:border-b
			[&_td.last-col]:border-r
			[&_td.first-col]:border-l
		`,e.rounded&&`
			[&_td.br]:rounded-br-sm
			[&_td.bl]:rounded-bl-sm
			[&_td.tr]:rounded-tr-sm
			[&_td.tl]:rounded-tl-sm
		`,i.$attrs.class))},[e.header?(b(),p("thead",se,[$("tr",ie,[(b(!0),p(z,null,E(e.cols,(o,c)=>j(i.$slots,`header-${o.toString()}`,{key:o,class:m([s.value[`-1-${c}`],"cell table--header-cell",e.colConfig[o]?.resizable===!1?"no-resize":""].join(" ")),style:M(`width:${n.value.length>0?n.value[c]:""}; `),colKey:o},()=>[$("td",{class:m([s.value[`-1-${c}`],"cell table--header-cell",e.colConfig[o]?.resizable===!1?"no-resize":""].join(" ")),style:M(`width:${n.value.length>0?n.value[c]:""}; `)},H(e.colConfig[o]?.name??o),7)])),128))])])):J("",!0),$("tbody",le,[(b(!0),p(z,null,E(e.values,(o,c)=>(b(),p("tr",{key:typeof e.itemKey=="function"?e.itemKey(o):o[e.itemKey],class:"table--row"},[(b(!0),p(z,null,E(e.cols,(d,g)=>j(i.$slots,d,{key:(typeof e.itemKey=="function"?e.itemKey(o):o[e.itemKey])+d.toString(),item:o,value:o[d],class:m(s.value[`${c}-${g}`]+"table--cell cell")},()=>[$("td",{class:m(s.value[`${c}-${g}`]+"table--cell cell")},H(o[d]),3)])),128))]))),128))])],2)),[[O(ee),r.value]])}});export{ce as default};
