<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@witchcraft/layout</title><meta name="description" content="Documentation for @witchcraft/layout"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@witchcraft/layout</a><div id="tsd-toolbar-links"><a href="https://github.com/witchcraftjs/layout">Github</a><a href="https://github.com/witchcraftjs/layout/issues">Issues</a><a href="http://npmjs.com/@witchcraft/layout">npm</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@witchcraft/layout</h1></div><div class="tsd-panel tsd-typography"><p><a href="https://github.com/witchcraftjs/layout/actions/workflows/docs.yml"><img src="https://github.com/witchcraftjs/layout/workflows/Docs/badge.svg" alt="Docs"></a>
<a href="https://github.com/witchcraftjs/layout/actions/workflows/release.yml"><img src="https://github.com/witchcraftjs/layout/actions/workflows/release.yml/badge.svg" alt="Release"></a>
<a href="https://www.npmjs.com/package/@witchcraft/layout/v/latest"><img src="https://img.shields.io/npm/v/%40alanscodelog%2FREPONAME/latest" alt="NPM Version (with latest tag)"></a></p>
<h1 id="docs" class="tsd-anchor-link"><a href="https://witchcraftjs.github.io/layout">Docs</a><a href="#docs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h1 id="demo" class="tsd-anchor-link"><a href="https://witchcraftjs.github.io/layout/demo">Demo</a><a href="#demo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h1 id="witchcraftlayout" class="tsd-anchor-link">@witchcraft/layout<a href="#witchcraftlayout" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A headless layout manager for managing frames in an app.</p>
<p>While it's headless, it does provide ready made nuxt/vue components, but it's pretty easy to re-create these if you need them.</p>
<p>The structure of the library might seem a bit odd. It's not written with classes at all, but uses plain objects and many small utility functions to manipulate them. This makes the objects easily de/serializable and extendable. Basic zod types are included for validating them.</p>
<h1 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="base-types" class="tsd-anchor-link">Base Types<a href="#base-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>While some base types are provided, it's required you define what's inside a frame.</p>
<p>This can be done using types:</p>
<pre><code class="ts"><span class="hl-0">// you don&#39;t need to extend from LayoutFrame, it&#39;s done automatically</span><br/><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-3">ContentA</span><span class="hl-2"> = {</span><br/><span class="hl-2">	</span><span class="hl-4">type</span><span class="hl-2">: </span><span class="hl-5">&quot;contentA&quot;</span><br/><span class="hl-2">	</span><span class="hl-4">content</span><span class="hl-2">: {</span><br/><span class="hl-2">		</span><span class="hl-4">id</span><span class="hl-2">?: </span><span class="hl-3">string</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span><br/><span class="hl-1">type</span><span class="hl-2"> </span><span class="hl-3">ContentB</span><span class="hl-2"> = {</span><br/><span class="hl-2">	</span><span class="hl-4">type</span><span class="hl-2">: </span><span class="hl-5">&quot;contentB&quot;</span><br/><span class="hl-2">	</span><span class="hl-4">content</span><span class="hl-2">: {</span><br/><span class="hl-2">		</span><span class="hl-4">someOtherKey</span><span class="hl-2">?: </span><span class="hl-3">string</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span><br/><span class="hl-1">declare</span><span class="hl-2"> </span><span class="hl-1">module</span><span class="hl-2"> </span><span class="hl-5">&quot;@witchcraft/layout&quot;</span><span class="hl-2"> {</span><br/><span class="hl-2">	</span><span class="hl-1">interface</span><span class="hl-2"> </span><span class="hl-3">Register</span><span class="hl-2"> {</span><br/><span class="hl-2">		</span><span class="hl-4">ExtendedLayoutFrame</span><span class="hl-2">: </span><span class="hl-3">ContentA</span><span class="hl-2"> | </span><span class="hl-3">ContentB</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span><br/><span class="hl-6">export</span><span class="hl-2"> {}</span><br/>
</code><button type="button">Copy</button></pre>

<p>Or if using zod, you can do something like this. Note that you will need to create/extend <code>zLayoutWindow/Frame</code> or use <code>zLayoutWindow/FrameLoose</code> to allow for extra properties. All zod types have been made <code>strict</code> where possible as it's easy to accidentally use the wrong type and loose properties silently otherwise.</p>
<pre><code class="ts"><span class="hl-6">import</span><span class="hl-2"> { </span><span class="hl-4">zLayoutFrameLoose</span><span class="hl-2">, </span><span class="hl-4">layoutCreate</span><span class="hl-2"> } </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-5">&quot;@witchcraft/layout&quot;</span><br/><span class="hl-6">import</span><span class="hl-2"> { </span><span class="hl-4">z</span><span class="hl-2"> } </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-5">&quot;zod&quot;</span><br/><br/><span class="hl-0">// we remove the id to set the discriminated union, then add it back,</span><br/><span class="hl-0">// otherwise this doesn&#39;t work</span><br/><span class="hl-6">export</span><span class="hl-2"> </span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">zAppFrame</span><span class="hl-2"> = </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">discriminatedUnion</span><span class="hl-2">(</span><span class="hl-5">&quot;type&quot;</span><span class="hl-2">, [</span><br/><span class="hl-2">	</span><span class="hl-4">zLayoutFrameLoose</span><span class="hl-2">.</span><span class="hl-8">extend</span><span class="hl-2">({</span><br/><span class="hl-2">		</span><span class="hl-4">type:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">literal</span><span class="hl-2">(</span><span class="hl-5">&quot;contentA&quot;</span><span class="hl-2">),</span><br/><span class="hl-2">		</span><span class="hl-4">content:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">object</span><span class="hl-2">({</span><br/><span class="hl-2">			</span><span class="hl-4">id:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">optional</span><span class="hl-2">(</span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">uuid</span><span class="hl-2">()),</span><br/><span class="hl-2">		}),</span><br/><span class="hl-2">	}),</span><br/><span class="hl-2">	</span><span class="hl-4">zLayoutFrameLoose</span><span class="hl-2">.</span><span class="hl-8">extend</span><span class="hl-2">({</span><br/><span class="hl-2">		</span><span class="hl-4">type:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">literal</span><span class="hl-2">(</span><span class="hl-5">&quot;contentB&quot;</span><span class="hl-2">),</span><br/><span class="hl-2">		</span><span class="hl-4">content:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">object</span><span class="hl-2">({</span><br/><span class="hl-2">			</span><span class="hl-4">someOtherKey:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">optional</span><span class="hl-2">(</span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">uuid</span><span class="hl-2">()),</span><br/><span class="hl-2">		}),</span><br/><span class="hl-2">	}),</span><br/><span class="hl-2">]).</span><span class="hl-8">and</span><span class="hl-2">(</span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">object</span><span class="hl-2">({</span><br/><span class="hl-2">	</span><span class="hl-4">id:</span><span class="hl-2"> </span><span class="hl-4">z</span><span class="hl-2">.</span><span class="hl-8">uuid</span><span class="hl-2">(),</span><br/><span class="hl-2">}))</span><br/><br/><span class="hl-1">declare</span><span class="hl-2"> </span><span class="hl-1">module</span><span class="hl-2"> </span><span class="hl-5">&quot;@witchcraft/layout&quot;</span><span class="hl-2"> {</span><br/><span class="hl-2">	</span><span class="hl-1">interface</span><span class="hl-2"> </span><span class="hl-3">Register</span><span class="hl-2"> {</span><br/><span class="hl-2">		</span><span class="hl-0">//	Register the type</span><br/><span class="hl-2">		</span><span class="hl-4">ExtendedLayoutFrame</span><span class="hl-2">: </span><span class="hl-3">z</span><span class="hl-2">.</span><span class="hl-3">infer</span><span class="hl-2">&lt;</span><span class="hl-1">typeof</span><span class="hl-2"> </span><span class="hl-4">zAppFrame</span><span class="hl-2">&gt;</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="basics" class="tsd-anchor-link">Basics<a href="#basics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A layout is very simple, and looks like this:</p>
<pre><code class="ts"><span class="hl-2">{</span><br/><span class="hl-2">	</span><span class="hl-9">activeWindow</span><span class="hl-2">: </span><span class="hl-4">string</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-9">windows</span><span class="hl-2">: {</span><br/><span class="hl-2">		[</span><span class="hl-4">id</span><span class="hl-2">: </span><span class="hl-4">string</span><span class="hl-2">]: {</span><br/><span class="hl-2">			</span><span class="hl-4">activeFrame:</span><span class="hl-2"> </span><span class="hl-4">string</span><span class="hl-2">,</span><br/><span class="hl-2">			</span><span class="hl-4">pxWidth:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">			</span><span class="hl-4">pxHeight:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">			</span><span class="hl-4">pxX:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">			</span><span class="hl-4">pxY:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">			</span><span class="hl-4">frames:</span><span class="hl-2"> {</span><br/><span class="hl-2">				</span><span class="hl-4">[id: string]:</span><span class="hl-2"> {</span><br/><span class="hl-2">					</span><span class="hl-4">id:</span><span class="hl-2"> </span><span class="hl-4">string</span><span class="hl-2">,</span><br/><span class="hl-2">					</span><span class="hl-4">x:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">					</span><span class="hl-4">y:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">					</span><span class="hl-4">width:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">					</span><span class="hl-4">height:</span><span class="hl-2"> </span><span class="hl-4">number</span><span class="hl-2">,</span><br/><span class="hl-2">				}</span><br/><span class="hl-2">			}</span><br/><span class="hl-2">		}</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>NOTE: While the &quot;container&quot; for frames is called a window, it does not refer to the actual window, but the element holding the frames (which could only take up a part of the real window) and it's size/pos are in pixels as opposed to the frames which use percentages.</p>
<p>Frame positions are in <em>scaled</em> percentage ints. That is, instead of 100%, the value is <code>100 * 10^SCALE</code>. <code>SCALE</code> is 3 by default, so 100% is 100000.</p>
<p>This is done like this to make it easy to keep the dimensions rounded to x decimal points (in this case 3, <code>100%</code> =&gt; <code>100000</code> =&gt; <code>100.000%</code>). You could not use any decimal points but movements will be choppy.</p>
<p><code>SCALE</code> is a global setting. See configuration below.</p>
<h2 id="configuration" class="tsd-anchor-link">Configuration<a href="#configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>There are a few variables that need to be used nearly everywhere such as <code>SCALE</code> and <code>SNAP_PERCENT_{X/Y}</code>.</p>
<p>While all function that need them, can also be called with params to override them, it's much easier to just manage them globally.</p>
<p>They are exported from <code>/settings.js</code> and stored in a variable called <code>globalOptions</code> which you can modify, but helpers are provided for getting/setting the information we actually want to extract using these variables, <code>maxInt</code>, <code>margin</code>, <code>snapPoint</code>.</p>
<pre><code class="ts"><span class="hl-6">import</span><span class="hl-2"> {</span><br/><span class="hl-2">	</span><span class="hl-4">globalOptions</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">getMaxInt</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-0">// this is called snapPoint because it&#39;s type looks like a point</span><br/><span class="hl-2">	</span><span class="hl-0">// but it&#39;s more like it describes snap steps / distance in x/y</span><br/><span class="hl-2">	</span><span class="hl-4">getSnapPoint</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">setScale</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">setSnapAmount</span><br/><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-5">&quot;@witchcraft-layout/settings.js&quot;</span><br/><br/><span class="hl-0">// the function checks the max number is safe to use (using `isSafeInteger`)</span><br/><span class="hl-0">// 3 decimal points of precision</span><br/><span class="hl-8">setScale</span><span class="hl-2">(</span><span class="hl-10">3</span><span class="hl-2">) </span><br/><span class="hl-0">// snap to 1%</span><br/><span class="hl-8">setSnapPercentage</span><span class="hl-2">(</span><span class="hl-10">1</span><span class="hl-2">) </span><br/><span class="hl-0">// snap x/y differently</span><br/><span class="hl-8">setSnapPercentage</span><span class="hl-2">({ </span><span class="hl-4">x:</span><span class="hl-2"> </span><span class="hl-10">1</span><span class="hl-2">, </span><span class="hl-4">y:</span><span class="hl-2"> </span><span class="hl-10">2</span><span class="hl-2"> })</span><br/><span class="hl-8">setMarginPercentage</span><span class="hl-2">(</span><span class="hl-10">1</span><span class="hl-2">)</span><br/><br/><span class="hl-0">// like doing const maxInt = globalOptions.maxInt</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">maxInt</span><span class="hl-2"> = </span><span class="hl-8">getMaxInt</span><span class="hl-2">() </span><span class="hl-0">// 100000</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">snapAmountPoint</span><span class="hl-2"> = </span><span class="hl-8">getSnapPoint</span><span class="hl-2">() </span><span class="hl-0">// { x: 1000, y: 1000 }</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">marginSize</span><span class="hl-2"> = </span><span class="hl-8">getMarginSize</span><span class="hl-2">() </span><span class="hl-0">// { width: 1000, height: 1000 }</span>
</code><button type="button">Copy</button></pre>

<p><strong>NOTE: If you are saving layouts, if you change the snap or the margins to a bigger value, old layouts will become &quot;invalid&quot;.</strong> The should still load and you should be able to close frames, but it's not guaranteed they'll function correctly.</p>
<p>There are utilities for converting between non-scaled and scaled values if you need to:</p>
<pre><code class="ts"><span class="hl-6">import</span><span class="hl-2"> {</span><br/><span class="hl-2">	</span><span class="hl-4">numberToScaledSize</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">numverToScaledPercent</span><br/><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-5">&quot;@witchcraft-layout/helpers/numberToScaledSize.js&quot;</span><br/><br/><span class="hl-2"> </span><span class="hl-0">/* -----------</span><br/><span class="hl-0"> * |    *    |</span><br/><span class="hl-0"> * -----------</span><br/><span class="hl-0"> *      |    ^100px</span><br/><span class="hl-0"> *      ^ 50px</span><br/><span class="hl-0"> * // returns 50 / 100 * scale or 50000 (50%)</span><br/><span class="hl-0"> */</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">scaledPercent</span><span class="hl-2"> = </span><span class="hl-8">numberToScaledPercent</span><span class="hl-2">(</span><span class="hl-4">someCoord</span><span class="hl-2">, </span><span class="hl-4">boundingBoxMax</span><span class="hl-2">, </span><span class="hl-4">scale</span><span class="hl-2">) </span><span class="hl-0">// scale is optional and will use the global scale </span>
</code><button type="button">Copy</button></pre>

<h2 id="creating-a-layout" class="tsd-anchor-link">Creating a Layout<a href="#creating-a-layout" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Using vue as an example, in some file, preferably some sort of store like pinia, you can do something like this:</p>
<pre><code class="ts"><span class="hl-6">import</span><span class="hl-2"> {</span><span class="hl-4">reactive</span><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-5">&quot;vue&quot;</span><br/><br/><span class="hl-0">// this does not have any windows/frames</span><br/><span class="hl-0">// you will need to add them if you want them to exist on init</span><br/><span class="hl-6">export</span><span class="hl-2"> </span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">layout</span><span class="hl-2"> = </span><span class="hl-8">ref</span><span class="hl-2">(</span><span class="hl-8">layoutCreate</span><span class="hl-2">())</span>
</code><button type="button">Copy</button></pre>

<p>Then in the page with the layout, initialize it and add a component to handle the rendering. One is included for vue, but it's pretty simple.</p>
<p>It uses a flat structure insides like so, so edges are always on top of frames, and decorations (drag/drop) are always on top of edges:</p>
<pre><code><span class="hl-2">- </span><span class="hl-4">LayoutWindow</span><br/><span class="hl-2">  	- </span><span class="hl-4">LayoutFrame</span><br/><span class="hl-2">  		- [</span><span class="hl-4">Slot</span><span class="hl-2">] (</span><span class="hl-5">`frame-</span><span class="hl-1">${</span><span class="hl-4">frame</span><span class="hl-11">.</span><span class="hl-4">id</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-2">)</span><br/><span class="hl-2">	- </span><span class="hl-8">LayoutEdges</span><span class="hl-2"> (</span><span class="hl-4">Edge</span><span class="hl-2"> </span><span class="hl-4">type</span><span class="hl-2">)</span><br/><span class="hl-2">	- </span><span class="hl-4">LayoutDecos</span>
</code><button>Copy</button></pre>

<p>Edges and Decos are very simple and there are various utilies like <code>getVisualEdgesCss</code> and <code>getShapeSquareCss</code> to create the css needed to display them. They can both be handled as squares making it easy to reuse a single component to render them.</p>
<p>This has the benefit for edges, that the grabable area can be easily adjusted and bigger than the displayed edge.</p>
<h2 id="dragging" class="tsd-anchor-link">Dragging<a href="#dragging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Then you will need to add dragging. This is not implemented by default (except for vue) as the state and rendering of a layout being dragged like this is almost always tightly coupled with whatever framework you're using and how you've structured your app. What I've figured out how to separate such as the <code>DragDirectionStore</code> and the drag action handlers is in <code>/drag</code>.</p>
<p>The default vue component implements some complex, optimized behavior (see the <code>useFrames</code> composable) if you want to see an example.</p>
<p>But basic dragging can be added as follows:</p>
<p>Add a <code>pointerdown</code> handler to all the edges.</p>
<p>You can then use <code>toWindowCoord</code> to translate the event coordinates into a point.</p>
<p>Before using it, you should be sure the window's coordinates are updated as this requires knowing the x/y px offset and the window dimensions.</p>
<pre><code class="ts"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">point</span><span class="hl-2"> = </span><span class="hl-8">toWindowCoord</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">, </span><span class="hl-4">e</span><span class="hl-2">, </span><span class="hl-4">snapPoint</span><span class="hl-2">) </span><span class="hl-0">// snapPoint is optional, it uses the global settings</span>
</code><button type="button">Copy</button></pre>

<p>One drag starts, I suggest making a copy of the original positions in case you need to cancel the drag. This can be further optimized by only cloning and modifying the touching frames and overlaying them over the unmoved edges to render them. See <a href="#overlayed-frames-technique">Overlayed Frames Technique</a> below.</p>
<p>You can use the <code>DragDirectionStore </code>to help keep track of which direction the user is dragging.</p>
<p>Minus framework specific details, the drag handlers might look something like this:</p>
<pre><code class="ts"><span class="hl-0">// i suggest against a barrel import if not using all features, but this is for demo purposes</span><br/><span class="hl-6">import</span><span class="hl-2"> {</span><br/><span class="hl-2">	</span><span class="hl-4">DragDirectionStore</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">getEdgeDirection</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">moveEdge</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">cloneFrame</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">getVisualEdges</span><span class="hl-2">,</span><br/><span class="hl-2">	</span><span class="hl-4">toWindowCoord</span><br/><span class="hl-2">	</span><span class="hl-4">findFramesTouchingEdge</span><br/><span class="hl-2">	</span><span class="hl-6">type</span><span class="hl-2"> </span><span class="hl-4">Point</span><span class="hl-2">, </span><span class="hl-6">type</span><span class="hl-2"> </span><span class="hl-4">Edge</span><span class="hl-2">, </span><span class="hl-6">type</span><span class="hl-2"> </span><span class="hl-4">LayoutFrame</span><span class="hl-2">, </span><span class="hl-6">type</span><span class="hl-2"> </span><span class="hl-4">LayoutWindow</span><br/><span class="hl-2">} </span><span class="hl-6">from</span><span class="hl-2"> </span><span class="hl-5">&quot;@witchcraft-layout&quot;</span><br/><br/><span class="hl-0">// const frames = getFramesFromYourStore() </span><br/><br/><span class="hl-0">// can be reused</span><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">dragDirStore</span><span class="hl-2"> = </span><span class="hl-1">new</span><span class="hl-2"> </span><span class="hl-8">DragDirectionStore</span><span class="hl-2">()</span><br/><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">dragPoint</span><span class="hl-2">: </span><span class="hl-3">Point</span><span class="hl-2"> | </span><span class="hl-3">undefined</span><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">draggingEdge</span><span class="hl-2">: </span><span class="hl-3">Edge</span><span class="hl-2"> | </span><span class="hl-3">undefined</span><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">isDragging</span><span class="hl-2"> = </span><span class="hl-1">false</span><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">clonedFrames</span><span class="hl-2">: </span><span class="hl-3">Record</span><span class="hl-2">&lt;</span><span class="hl-3">string</span><span class="hl-2">, </span><span class="hl-3">LayoutFrame</span><span class="hl-2">&gt; = {}</span><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">touchingFrames</span><span class="hl-2">: </span><span class="hl-3">Record</span><span class="hl-2">&lt;</span><span class="hl-3">string</span><span class="hl-2">, </span><span class="hl-3">LayoutFrame</span><span class="hl-2">&gt; = {}</span><br/><br/><span class="hl-0">// this is what you can render by transforming it into css using getVisualEdgesCss</span><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">visualEdges</span><span class="hl-2">: </span><span class="hl-3">Edge</span><span class="hl-2">[] = []</span><br/><br/><span class="hl-0">// updates the edges, it doesn&#39;t have to be done with every event</span><br/><span class="hl-0">// if the cursor hasn&#39;t moved. The dragDirStore can tell you if it did.</span><br/><span class="hl-1">function</span><span class="hl-2"> </span><span class="hl-8">forceRecalculateEdges</span><span class="hl-2">() {</span><br/><span class="hl-2">	</span><span class="hl-4">visualEdges</span><span class="hl-2"> = </span><span class="hl-8">getVisualEdges</span><span class="hl-2">(</span><span class="hl-4">Object</span><span class="hl-2">.</span><span class="hl-8">values</span><span class="hl-2">(</span><span class="hl-4">frames</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">), </span><span class="hl-1">false</span><span class="hl-2">)</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// just makes it easier to remove the temporary window listeners</span><br/><span class="hl-1">let</span><span class="hl-2"> </span><span class="hl-4">controller</span><span class="hl-2">: </span><span class="hl-3">AbortController</span><br/><br/><span class="hl-0">// assuming something like this for each edge</span><br/><span class="hl-0">// edgeEl.addEventListener(&quot;pointerdown&quot;, (e) =&gt; dragStartHandler(e, edge))</span><br/><span class="hl-0">// you could even pass the point here already, and have handlers that look like ({edge, point}) =&gt; {...})</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-8">dragStartHandler</span><span class="hl-2"> = </span><span class="hl-1">function</span><span class="hl-2">(</span><span class="hl-4">e</span><span class="hl-2">:</span><span class="hl-3">PointerEvent</span><span class="hl-2">, </span><span class="hl-4">edge</span><span class="hl-2">:</span><span class="hl-3">Edge</span><span class="hl-2">) {</span><br/><span class="hl-2">	</span><span class="hl-4">controller</span><span class="hl-2"> = </span><span class="hl-1">new</span><span class="hl-2"> </span><span class="hl-8">AbortController</span><span class="hl-2">()</span><br/><span class="hl-2">	</span><span class="hl-4">window</span><span class="hl-2">.</span><span class="hl-8">addEventListener</span><span class="hl-2">(</span><span class="hl-5">&quot;pointermove&quot;</span><span class="hl-2">, </span><span class="hl-4">dragMoveHandler</span><span class="hl-2">, { </span><span class="hl-4">signal:</span><span class="hl-2"> </span><span class="hl-4">controller</span><span class="hl-2">.</span><span class="hl-4">signal</span><span class="hl-2"> })</span><br/><span class="hl-2">	</span><span class="hl-4">window</span><span class="hl-2">.</span><span class="hl-8">addEventListener</span><span class="hl-2">(</span><span class="hl-5">&quot;pointerup&quot;</span><span class="hl-2">, </span><span class="hl-4">dragEndHandler</span><span class="hl-2">, { </span><span class="hl-4">signal:</span><span class="hl-2"> </span><span class="hl-4">controller</span><span class="hl-2">.</span><span class="hl-4">signal</span><span class="hl-2"> })</span><br/><span class="hl-2">	</span><span class="hl-4">e</span><span class="hl-2">.</span><span class="hl-8">preventDefault</span><span class="hl-2">()</span><br/><br/><span class="hl-2">	</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">point</span><span class="hl-2"> = </span><span class="hl-8">toWindowCoord</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">, </span><span class="hl-4">e</span><span class="hl-2">)</span><br/><br/><span class="hl-2">	</span><span class="hl-4">dragPoint</span><span class="hl-2"> = </span><span class="hl-4">point</span><br/><span class="hl-2">	</span><span class="hl-4">dragDirStore</span><span class="hl-2">.</span><span class="hl-8">setOrientation</span><span class="hl-2">(</span><span class="hl-8">getEdgeDirection</span><span class="hl-2">(</span><span class="hl-4">edge</span><span class="hl-2">))</span><br/><span class="hl-2">	</span><span class="hl-4">dragDirStore</span><span class="hl-2">.</span><span class="hl-8">update</span><span class="hl-2">(</span><span class="hl-4">point</span><span class="hl-2">, </span><span class="hl-4">dragDirection</span><span class="hl-2">)</span><br/><br/><span class="hl-2">	</span><span class="hl-4">draggingEdge</span><span class="hl-2"> = </span><span class="hl-4">edge</span><br/><span class="hl-2">	</span><span class="hl-4">isDragging</span><span class="hl-2"> = </span><span class="hl-1">true</span><br/><span class="hl-2">	</span><span class="hl-4">touchingFrames</span><span class="hl-2"> = </span><span class="hl-8">findFramesTouchingEdge</span><span class="hl-2">(</span><span class="hl-4">edge</span><span class="hl-2">, </span><span class="hl-4">Object</span><span class="hl-2">.</span><span class="hl-8">values</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">.</span><span class="hl-4">frames</span><span class="hl-2">)) ?? []</span><br/><span class="hl-2">	</span><span class="hl-6">for</span><span class="hl-2"> (</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">frame</span><span class="hl-2"> </span><span class="hl-1">of</span><span class="hl-2"> </span><span class="hl-4">Object</span><span class="hl-2">.</span><span class="hl-8">values</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">.</span><span class="hl-4">frames</span><span class="hl-2">)) {</span><br/><span class="hl-2">		</span><span class="hl-4">clonedFrames</span><span class="hl-2">[</span><span class="hl-4">frame</span><span class="hl-2">.</span><span class="hl-4">id</span><span class="hl-2">] = </span><span class="hl-8">cloneFrame</span><span class="hl-2">(</span><span class="hl-4">frame</span><span class="hl-2">)</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-8">dragMoveHandler</span><span class="hl-2"> = </span><span class="hl-1">function</span><span class="hl-2">(</span><span class="hl-4">e</span><span class="hl-2">:</span><span class="hl-3">PointerEvent</span><span class="hl-2">, </span><span class="hl-4">edge</span><span class="hl-2">:</span><span class="hl-3">Edge</span><span class="hl-2">) {</span><br/><span class="hl-2">	</span><span class="hl-4">e</span><span class="hl-2">.</span><span class="hl-8">preventDefault</span><span class="hl-2">()</span><br/><span class="hl-2">	</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">point</span><span class="hl-2"> = </span><span class="hl-8">toWindowCoord</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">, </span><span class="hl-4">e</span><span class="hl-2">, </span><span class="hl-4">snapPoint</span><span class="hl-2">)</span><br/><br/><span class="hl-2">	</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">didChange</span><span class="hl-2"> = </span><span class="hl-4">dragDirStore</span><span class="hl-2">.</span><span class="hl-8">update</span><span class="hl-2">(</span><span class="hl-4">point</span><span class="hl-2">, </span><span class="hl-4">dragDirection</span><span class="hl-2">)</span><br/><span class="hl-2">	</span><span class="hl-4">dragPoint</span><span class="hl-2"> = </span><span class="hl-4">point</span><br/><span class="hl-2">	</span><span class="hl-6">if</span><span class="hl-2"> (!</span><span class="hl-4">didChange</span><span class="hl-2">) </span><span class="hl-6">return</span><br/><br/><span class="hl-2">	</span><span class="hl-8">requestAnimationFrame</span><span class="hl-2">(() </span><span class="hl-1">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">		</span><span class="hl-6">if</span><span class="hl-2"> (</span><span class="hl-4">isDragging</span><span class="hl-2">) {</span><br/><span class="hl-2">			</span><span class="hl-8">moveEdge</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">, </span><span class="hl-4">touchingFrames</span><span class="hl-2">, </span><span class="hl-4">draggingEdge</span><span class="hl-2">, </span><span class="hl-4">point</span><span class="hl-2">, </span><span class="hl-10">20</span><span class="hl-2">)</span><br/><span class="hl-2">		}</span><br/><span class="hl-2">		</span><span class="hl-8">forceRecalculateEdges</span><span class="hl-2">()</span><br/><span class="hl-2">	})</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-8">dragEndHandler</span><span class="hl-2"> = </span><span class="hl-1">function</span><span class="hl-2">(</span><span class="hl-4">e</span><span class="hl-2">:</span><span class="hl-3">PointerEvent</span><span class="hl-2">, </span><span class="hl-4">edge</span><span class="hl-2">:</span><span class="hl-3">Edge</span><span class="hl-2">) {</span><br/><span class="hl-2">	</span><span class="hl-4">e</span><span class="hl-2">.</span><span class="hl-8">preventDefault</span><span class="hl-2">()</span><br/><span class="hl-2">	</span><span class="hl-4">controller</span><span class="hl-2">.</span><span class="hl-8">abort</span><span class="hl-2">() </span><span class="hl-0">// remove the temporary listeners</span><br/><span class="hl-2">	</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">point</span><span class="hl-2"> = </span><span class="hl-8">toWindowCoord</span><span class="hl-2">(</span><span class="hl-4">win</span><span class="hl-2">, </span><span class="hl-4">e</span><span class="hl-2">, </span><span class="hl-4">snapPoint</span><span class="hl-2">)</span><br/><br/><span class="hl-2">	</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">didChange</span><span class="hl-2"> = </span><span class="hl-4">dragDirStore</span><span class="hl-2">.</span><span class="hl-8">update</span><span class="hl-2">(</span><span class="hl-4">point</span><span class="hl-2">, </span><span class="hl-4">dragDirection</span><span class="hl-2">)</span><br/><span class="hl-2">	</span><span class="hl-4">dragPoint</span><span class="hl-2"> = </span><span class="hl-4">point</span><br/><span class="hl-2">	</span><span class="hl-4">isDragging</span><span class="hl-2"> = </span><span class="hl-1">false</span><br/><span class="hl-2">	</span><span class="hl-4">draggingEdge</span><span class="hl-2"> = </span><span class="hl-1">undefined</span><br/><br/><span class="hl-2">	</span><span class="hl-4">touchingFrames</span><span class="hl-2"> = {}</span><br/><span class="hl-2">	</span><span class="hl-4">dragDirStore</span><span class="hl-2">.</span><span class="hl-8">reset</span><span class="hl-2">()</span><br/><span class="hl-2">	</span><span class="hl-4">dragPoint</span><span class="hl-2"> = </span><span class="hl-1">undefined</span><br/><span class="hl-2">	</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">apply</span><span class="hl-2"> = </span><span class="hl-0">// determine if user wants to apply the drag</span><br/><span class="hl-2">	</span><span class="hl-6">if</span><span class="hl-2"> (!</span><span class="hl-4">apply</span><span class="hl-2">) {</span><br/><span class="hl-2">		</span><span class="hl-6">for</span><span class="hl-2"> (</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">frame</span><span class="hl-2"> </span><span class="hl-1">of</span><span class="hl-2"> </span><span class="hl-4">Object</span><span class="hl-2">.</span><span class="hl-8">values</span><span class="hl-2">(</span><span class="hl-4">clonedFrames</span><span class="hl-2">)) {</span><br/><span class="hl-2">			</span><span class="hl-4">win</span><span class="hl-2">.</span><span class="hl-4">frames</span><span class="hl-2">[</span><span class="hl-4">frame</span><span class="hl-2">.</span><span class="hl-4">id</span><span class="hl-2">] = </span><span class="hl-4">frame</span><br/><span class="hl-2">		}</span><br/><span class="hl-2">	}</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="drag-actions" class="tsd-anchor-link">Drag Actions<a href="#drag-actions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A drag action describes when and how to handle a drag event, to, for example, split/close a frame when dragging with a certain modifier.</p>
<p>Customizable <code>SplitAction</code> and <code>CloseAction</code> actions are provided.</p>
<p>It requires implementing the some of the variables <code>useFrames</code> returns (i.e. using the overlayed frames technique) for your framework. You can see an example of how to use it in the <code>LayoutWindows.vue</code> component.</p>
<h3 id="overlayed-frames-technique" class="tsd-anchor-link">Overlayed Frames Technique<a href="#overlayed-frames-technique" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you will be using drag actions or something like it, you'll probably want to handle the frame state by overlaying the changed state as needed. This makes two things possible:</p>
<ul>
<li>Actions can hide the new state. For example, when splitting, we don't want the edges to move from their original position.</li>
<li>Actions can be easily cancelled.</li>
</ul>
<p>To do this, at the start of the drag, you can clone all the touching frames (they will be the only ones that ever move) using <code>findFramesTouchingEdge</code> and <code>cloneFrames</code>.</p>
<pre><code class="ts"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">touchingFrames</span><span class="hl-2"> = {}</span><br/><span class="hl-6">for</span><span class="hl-2"> (</span><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">_</span><span class="hl-2"> </span><span class="hl-1">of</span><span class="hl-2"> </span><span class="hl-4">touching</span><span class="hl-2">) </span><span class="hl-4">touchingFrames</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">[</span><span class="hl-4">_</span><span class="hl-2">.</span><span class="hl-4">frame</span><span class="hl-2">.</span><span class="hl-4">id</span><span class="hl-2">] = </span><span class="hl-8">cloneFrame</span><span class="hl-2">(</span><span class="hl-4">_</span><span class="hl-2">.</span><span class="hl-4">frame</span><span class="hl-2">)</span>
</code><button type="button">Copy</button></pre>

<p>You can then just get the overlayed frames like this where you need them.</p>
<pre><code class="ts"><span class="hl-1">const</span><span class="hl-2"> </span><span class="hl-7">overlayedFrames</span><span class="hl-2"> = {</span><br/><span class="hl-2">	...</span><span class="hl-4">win</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">.</span><span class="hl-4">frames</span><span class="hl-2">,</span><br/><span class="hl-2">	...</span><span class="hl-4">touchingFrames</span><span class="hl-2">.</span><span class="hl-4">value</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>If your framework has something like vue's computed you should use that and you can use a condition to &quot;toggle&quot; the overlay on/off.</p>
<pre><code class="ts"><span class="hl-4">showDraggging</span><span class="hl-2"> </span><br/><span class="hl-2">	? { ...</span><span class="hl-4">win</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">.</span><span class="hl-4">frames</span><span class="hl-2">, ...</span><span class="hl-4">touchingFrames</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2"> }</span><br/><span class="hl-2">	: </span><span class="hl-4">win</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">.</span><span class="hl-4">frames</span>
</code><button type="button">Copy</button></pre>

<p>You should then calculate all visualEdges based off of these frames.</p>
<pre><code class="ts"><span class="hl-1">function</span><span class="hl-2"> </span><span class="hl-8">recalculateEdges</span><span class="hl-2">() {</span><br/><span class="hl-2">	</span><span class="hl-4">visualEdges</span><span class="hl-2"> = </span><span class="hl-8">getVisualEdges</span><span class="hl-2">(</span><span class="hl-4">Object</span><span class="hl-2">.</span><span class="hl-8">values</span><span class="hl-2">(</span><span class="hl-4">frames</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">), {</span><br/><span class="hl-2">		</span><span class="hl-0">// careful using this, you should handle this with a drag action</span><br/><span class="hl-2">		</span><span class="hl-0">// don&#39;t let it actually change the edges or you&#39;ll end up with an</span><br/><span class="hl-2">		</span><span class="hl-0">// invalid layout</span><br/><span class="hl-2">		</span><span class="hl-4">includeWindowEdges:</span><span class="hl-2"> </span><span class="hl-1">true</span><span class="hl-2">,</span><br/><span class="hl-2">	})</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>You can use <code>DragDirectionStore</code> in your events to check if anything actually changed.</p>
<p>If it did, you should move the edges in touchingFrames in your drag move handler and update your edges.</p>
<pre><code class="ts"><span class="hl-8">requestAnimationFrame</span><span class="hl-2">(() </span><span class="hl-1">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">	</span><span class="hl-8">moveEdge</span><span class="hl-2">(</span><span class="hl-4">touchingFramesArray</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">, </span><span class="hl-4">draggingEdge</span><span class="hl-2">.</span><span class="hl-4">value</span><span class="hl-2">, </span><span class="hl-4">point</span><span class="hl-2">)</span><br/><span class="hl-2">	</span><span class="hl-8">recalculateEdges</span><span class="hl-2">()</span><br/><span class="hl-2">})</span>
</code><button type="button">Copy</button></pre>

<h1 id="vue-only-extras" class="tsd-anchor-link">Vue Only Extras<a href="#vue-only-extras" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><h2 id="layoutwindow" class="tsd-anchor-link">LayoutWindow<a href="#layoutwindow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This is the main component that can render and handle dragging.</p>
<p>The component takes care of updating the size/pos of the window on mount.</p>
<p>It also includes basic styles for the edges and decos.</p>
<p>The order and styles classes look like this:</p>
<ul>
<li><code>.frame</code> - frames come first so that edges can be rendered on top of them when needed.</li>
</ul>
<p>Edges are stacked in this order.</p>
<ul>
<li><code>.active-frame-edge</code> (active frame - rendered as single div)</li>
<li><code>.drag-edge</code> (thicker edge for attaching pointer events) + sibling .edge
<ul>
<li>It looks like <code>.drag-edge .edge .drag-edge .edge</code> and so on.</li>
<li><code>.edge</code> is not shown by default, instead frames are padded to let the background show through since that way we can support having rounded corners inside the frames.</li>
<li>This is you can target the edge style on the drag-edge's hover: <code>.drag-edge:hover+.edge</code></li>
</ul>
</li>
<li><code>.grabbed-edge</code> (the grabbed drag edge if any) - prefer this over drag-edge:hover for css that should remain visible when dragging to avoid flickering when the mouse moves slightly off the edge</li>
<li><code>.intersection</code> (intersections)</li>
</ul>
<p><strong>ALL edges except <code>active-frame-edge</code> are rendered as individual divs, so set the background color instead of the border.</strong></p>
<p>This is done like this for several reasons:
- Edges can be shared by frames, only the active edges are guaranteed to equal some frame's edges. And we need to know the full edge that is being dragged to implement dragging.
- The css/logic is simpler, edges can be any width without affecting the layout. We just transform translate them to be exactly centered over their position and then just pad the frames the correct amount.</p>
<p>Decos:</p>
<ul>
<li>Close:
<ul>
<li><code>.deco-close-frame</code> (close frame preview)</li>
<li><code>.deco-close-force-frame</code> (close frame preview when force is on)</li>
</ul>
</li>
<li>Split:
<ul>
<li><code>.deco-split-new-frame</code> (new frame preview)</li>
<li><code>.deco-split-edge</code> (edge preview)</li>
</ul>
</li>
</ul>
<p>State classes (so you can do stuff like <code>.request-split .drag-edge</code>)</p>
<ul>
<li><code>.dragging</code></li>
<li><code>.request-split</code></li>
<li><code>.request-close</code></li>
</ul>
<p>Several css variables are provided to help with sizing:</p>
<ul>
<li><code>--layoutHandleWidth</code></li>
<li><code>--layoutEdgeWidth</code></li>
<li><code>--layoutSplitEdgeWidth</code></li>
<li><code>--layoutIntersectionWidth</code></li>
</ul>
<pre><code class="vue"><template>

<LayoutWindow
	v-if="win"
	class="flex-1 w-full
		// hide drag/grabbed edge when splitting (let only split edge show)
		[&.request-split_.grabbed-edge]:hidden
		[&.request-split_.drag-edge]:hidden
	"
	style="--layoutSplitEdgeWidth:2px;"
	:win="win"
>
	<template #[`frame-${f.id}`] v-for="f in frames" :key="f.id">
		<ContentFrame
			:frame="f"
			:get-component="getComponent"
		/>
	</template>
</LayoutWindow>
</template>

<script setup lang="ts">
const {
	layout,
	activeWindow: win,
	activeFrame,
	frames
} = storeToRefs(useLayoutStore())

function getComponent(type: string | undefined) {
	if (type === "contentA") {
		return yourContentAComponent
	}
}

</script>
</code><button type="button">Copy</button></pre>

<h2 id="nuxt-w-tailwind" class="tsd-anchor-link">Nuxt w/ Tailwind<a href="#nuxt-w-tailwind" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The nuxt module creates a <code>witchcraft-layout.css</code> file with the proper source imports for the components folder. You just have to import it in your tailwind css file. Note that this requires <code>@witchcraft/ui</code> be installed and setup in a similar way also.</p>
<pre><code class="css"><span class="hl-6">@import</span><span class="hl-2"> </span><span class="hl-5">&quot;tailwindcss&quot;</span><span class="hl-2">;</span><br/><span class="hl-2">// or</span><br/><span class="hl-6">@import</span><span class="hl-2"> </span><span class="hl-5">&quot;tailwindcss&quot;</span><span class="hl-2"> source(&quot;path/to/src&quot;);</span><br/><span class="hl-6">@import</span><span class="hl-2"> </span><span class="hl-5">&quot;../../../.nuxt/witchcraft-ui.css&quot;</span><span class="hl-2">;</span><br/><span class="hl-6">@import</span><span class="hl-2"> </span><span class="hl-5">&quot;../../../.nuxt/witchcraft-layout.css&quot;</span><span class="hl-2">;</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#docs"><span>Docs</span></a><a href="#demo"><span>Demo</span></a><a href="#witchcraftlayout"><span>@witchcraft/layout</span></a><a href="#usage"><span>Usage</span></a><ul><li><a href="#base-types"><span>Base <wbr/>Types</span></a></li><li><a href="#basics"><span>Basics</span></a></li><li><a href="#configuration"><span>Configuration</span></a></li><li><a href="#creating-a-layout"><span>Creating a <wbr/>Layout</span></a></li><li><a href="#dragging"><span>Dragging</span></a></li><li><ul><li><a href="#drag-actions"><span>Drag <wbr/>Actions</span></a></li><li><a href="#overlayed-frames-technique"><span>Overlayed <wbr/>Frames <wbr/>Technique</span></a></li></ul></li></ul><a href="#vue-only-extras"><span>Vue <wbr/>Only <wbr/>Extras</span></a><ul><li><a href="#layoutwindow"><span>Layout<wbr/>Window</span></a></li><li><a href="#nuxt-w-tailwind"><span>Nuxt w/ <wbr/>Tailwind</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/witchcraftjs/layout" class="tsd-nav-link">Github</a><a href="https://github.com/witchcraftjs/layout/issues" class="tsd-nav-link">Issues</a><a href="http://npmjs.com/@witchcraft/layout" class="tsd-nav-link">npm</a></nav><nav class="tsd-navigation"><a href="modules.html">@witchcraft/layout</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
